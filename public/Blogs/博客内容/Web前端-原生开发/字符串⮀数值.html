<article class="专题简介">
  <p 简介标题>&#127861;&nbsp;&nbsp;字符串<span 简介标题符号>&#11136;</span>数值</p>
  <p 作者信息>
    <span 姓名="原创">苏扬</span
    ><a 邮箱="原创" href="mailto:suyangzuo@gmail.com" title="发送电子邮件"
      >&#128233;</a
    ><img
      原创认证
      src="/Blogs/博客内容/原创.png"
      alt="原创"
      title="原创" /><span 日期>2023年6月22日</span>
  </p>
</article>
<div class="专题正文区">
  <h2 class="标题-h2">动态类型语言，确实很动态 &#128527;</h2>
  <ul class="正文列表 正文列表-1级">
    <li class="正文列表项 正文列表项-1级">
      <p 列表1级标题>发生甚么事了？</p>
      <ul class="正文列表 正文列表-2级">
        <li class="正文列表项 正文列表项-2级">
          我只是把字体尺寸增加了 5px，怎么字变得这么大？
        </li>
        <li class="正文列表项 正文列表项-2级">
          给元素的尺寸增加了 50px，结果元素直接涨到屏幕外面去了……
        </li>
      </ul>
    </li>
    <li class="正文列表项 正文列表项-1级">
      <p 列表1级标题>动态类型惹的祸。</p>
      <p 列表1级内容>&#9997; 让我们来看以下代码：</p>
      <pre class="lang-js"><code>let 尺寸_字符串形式 = "10";
let 尺寸_数值形式 = 10;
let 二者相加 = (尺寸_字符串形式 + 尺寸_数值形式);
let 二者相加的px形式 = `${二者相加}px`;
</code></pre>
      <p 列表1级内容>
        &#9997;
        1个是字符串，1个是整数，却把二者相加？如果是在C语言、C#、Java中，必然报错啊！这能行吗？不会真的变成
        20px 吧？
      </p>
      <pre class="lang-js"><code>console.log(二者相加的px形式);</code></pre>
      <p 列表1级内容>&#9997; 结果是………………………………</p>
      <img
        src="/Images/Blogs/Web前端-原生开发/字符串与数值的转换/字符串数值相加输出.png"
        alt="字符串数值相加输出"
        图含义="控制台输出" />
      <p 列表1级内容>
        &#9997; 竟然没有报错&#10067;&#10067;&#10067; 而且……变成了 1010px
        &#10067;&#10067;&#10067; 这结果能作用于样式吗？
      </p>
      <pre class="lang-js"><code>方框.style.fontSize = 二者相加的px形式;
方框.textContent = "能";</code></pre>
      <p 列表1级内容>&#9997; 让我们看看结果：</p>
      <img
        src="/Images/Blogs/Web前端-原生开发/字符串与数值的转换/能.png"
        alt="能"
        图含义="控制台输出"
        style="width: 100%" />
      <p 列表1级内容>
        &#9997; 这巨大的 <strong>能</strong> 字绝对不是 20px …… 怪了，"10px" +
        10px ，不仅不报错，变成了
        1010px，而且还真的有用？这颠覆了我以前的编程常识啊&#129300;&#129300;&#129300;……
      </p>
    </li>
    <li class="正文列表项 正文列表项-1级">
      <p 列表1级标题>
        "10" <span style="filter:brightness(150%); font-size: 0.9rem;">&#x2795;</span> 10，谁会做这种事啊？
      </p>
      <p 列表1级内容>&#9997; 正常人应该干不出来……确实，很少有人刻意干这种事。但是，有的时候，你会无意间这么做。</p>
      <p 列表1级内容>&#9997; 假设你在CSS中定义了一个宽度变量，值为100，看清楚，这时候它可是数值类型哦。<span 注释>为了区分，还定义了高度变量，类型为字符串。</span></p列表1级内容>
      <pre class="lang-css"><code>:root {
  --滑块进度: 50%;
  --宽度: 100;
  --高度: "100";
}</code></pre>
      <p 列表1级内容>&#9997; 你希望读取宽度变量，并且在一个循环中，每次使其自增 10：</p>
      <pre class="lang-js"><code>const root = document.querySelector(":root");
const rootStyle = window.getComputedStyle(root);
let 宽度 = rootStyle.getPropertyValue("--宽度");
        
for (let i = 1; i &lt;= 10; i++) {
  宽度 += 10;
  console.log(`第 ${i.toString().padStart(2, 0)} 次循环：${宽度}`);
  //padStart的作用是对齐，循环次数全部用2位数字，1位数字则前面填充0以补齐到2位
}</code></pre>
      <p 列表1级内容>&#9997; 初始值是100，每次循环自增10，循环10遍，那应该是 110 → 120 → 130 ………… 直到 200 吧？</p>
      <p 列表1级内容>&#9997; 但这回，你不确定了……于是你在循环里加入了控制台输出，来检验输出结果是否如同预期，聪明！</p>
      <img 图含义="控制台输出" src="/Images/Blogs/Web前端-原生开发/字符串与数值的转换/CSS变量循环自增.png" alt="CSS变量循环自增" style="max-width:400px;">
      <p 列表1级内容 style="font-size: 1.25rem;">😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠😠</p>
      <p 列表1级内容>&#9997; 就问你服不服？你应该意识到了，数值 100，肯定在某个地方被自动转换成字符串 "100" 了，因此，数值的叠加，变成了字符串的拼接。到底是在哪里转换的呢？哪一句读取了 <span class="语言">"--宽度"</span>  变量，就是哪一句的问题。那就只能是 <span class="语言">getPropertyValue("--宽度")</span> 的问题了。直接到 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration/getPropertyValue" title="MDN Web Docs" target="_blank" style="text-decoration: underline; text-underline-offset: 3px; text-decoration-color: orange;">MDN Web Docs</a> 上找答案吧！</p>
      <img 图含义="控制台输出" src="/Images/Blogs/Web前端-原生开发/字符串与数值的转换/getPropertyValue_MDN.png" alt="MDN getPropertyValue" style="max-width: 100%;">
      <p 列表1级内容>&#9997; 这回清清楚楚了，返回值是 <span class="语言">DOMString</span> 类型，是字符串！也就是说，虽然CSS变量是数值类型，但在JavaScript中用 <span class="语言">getPropertyValue()</span> 读取后，返回的却是字符串类型！</p>
    </li>
    <li class="正文列表项 正文列表项-1级">
      <p 列表1级标题>怎么办？</p>
      <p 列表1级内容>&#9997; 办法其实很传统，在读取CSS变量后，再加一句代码，将字符串重新转换为数值：</p>
      <pre class="lang-js"><code>const root = document.querySelector(":root");
const rootStyle = window.getComputedStyle(root);
let 宽度 = rootStyle.getPropertyValue("--宽度");
let 宽度_数值形式 = parseInt(宽度, 10); //就是这句，括号里的10代表转换为10进制整数

//循环内都使用数值形式的变量
for (let i = 1; i <= 10; i++) {
  宽度_数值形式 += 10;
  console.log(`第 ${i.toString().padStart(2, 0)} 次循环：${宽度_数值形式}`);
}</code></pre>
    <p 列表1级内容>&#9997; 让我们再次观察结果：</p>
    <img 图含义="控制台输出" src="/Images/Blogs/Web前端-原生开发/字符串与数值的转换/CSS变量循环自增_数值.png" alt="CSS变量循环自增" style="width:200px;">
    <p 列表1级内容>&#9997; 终于！！！！！🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹🥹</p>
    </li>
    <li class="正文列表项 正文列表项-1级">
      <p 列表1级标题>总结</p>
      <ul class="正文列表 正文列表-2级">
        <li class="正文列表项 正文列表项-2级">
          JavaScript 是动态类型语言，数值与字符串相加，有可能不会报错，结果是字符串形式的拼接。
        </li>
        <li class="正文列表项 正文列表项-2级">
          <span 举例标题>数值转换为字符串</span> <span class="语言">数值变量.toString()</span>
        </li>
        <li class="正文列表项 正文列表项-2级">
          <span 举例标题>字符串转换为10进制整数</span> <span class="语言">parseInt(字符串, 10)</span>
        </li>
        <li class="正文列表项 正文列表项-2级">
          JavaScript 中绝大部分读取属性的函数，返回值都是字符串形式。
        </li>
      </ul>
    </li>
  </ul>
</div>
